@page "/calculate"
@using OllamaSharp.Models.Chat
@using src.Data
@inject OllamaService OllamaService

<PageTitle>Calculate</PageTitle>

<h1>Interact with a calculator tool"</h1>

<div class="mb-3">
    <label for="expressionInput" class="form-label">Enter expression:</label>
    <input id="expressionInput" class="form-control" @bind="expression" @bind:event="oninput" placeholder="e.g. 2 + 2 * 3" />
</div>
<button class="btn btn-primary" @onclick="CalculateExpression">Calculate</button>

@if (result is not null)
{
    <div class="alert alert-success mt-3">
        Result: @result.Content
    </div>
}

@code {
    private string expression;
    private Message? result;

    private async Task CalculateExpression()
    {
        try
        {
            result = await OllamaService.CalculateFunction(expression);
        }
        catch (Exception ex)
        {
            result = null;
        }
    }
}